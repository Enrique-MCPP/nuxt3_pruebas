{"ast":null,"code":"import { FilterMatchMode } from 'primevue/api';\nimport { ref, computed, inject } from 'vue';\nexport default {\n  props: {\n    columns: {\n      type: Array,\n      required: true\n    },\n    pathListDatatable: {\n      type: String,\n      required: false\n    },\n    header: {\n      type: String,\n      default: \"Lista de elementos\"\n    },\n    crudInputs: {\n      type: Object,\n      default: () => ({})\n    },\n    state: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const filters = ref({});\n    const rowSelectListener = inject('rowSelectListenerPedidos');\n    const localSelectedRow = ref(null);\n    function initFilters() {\n      const filtersObj = {\n        'global': {\n          value: null,\n          matchMode: FilterMatchMode.CONTAINS\n        }\n      };\n      props.columns.forEach(column => {\n        filtersObj[column.field] = {\n          value: null,\n          matchMode: FilterMatchMode.CONTAINS\n        };\n      });\n      filters.value = filtersObj;\n    }\n    initFilters();\n    const globalFilterFields = computed(() => {\n      return ['global', ...props.columns.map(column => column.field)];\n    });\n    const currentPageReportTemplate = computed(() => {\n      return `Mostrando {first} a {last} de ${props.list.length} pedidos`;\n    });\n    return {\n      filters,\n      localSelectedRow,\n      globalFilterFields,\n      currentPageReportTemplate,\n      rowSelectListener\n    };\n  },\n  methods: {\n    // Aquí irían los métodos del componente\n    onRowSelect() {\n      //this.localSelectedRow = Object.assign({}, event.data);\n      console.log('row select del datatable hijo');\n      this.rowSelectListener(() => {\n        this.localSelectedRow;\n      });\n    }\n  }\n};","map":{"version":3,"names":["FilterMatchMode","ref","computed","inject","props","columns","type","Array","required","pathListDatatable","String","header","default","crudInputs","Object","state","setup","filters","rowSelectListener","localSelectedRow","initFilters","filtersObj","value","matchMode","CONTAINS","forEach","column","field","globalFilterFields","map","currentPageReportTemplate","list","length","methods","onRowSelect","console","log"],"sources":["C:\\Users\\emalc\\OneDrive\\Escritorio\\CRUD_keycloak_primeVue\\keycloak-workshop\\frontend-vuejs\\src\\componentes\\GenericDatatable.vue"],"sourcesContent":["<template>\r\n    <div style=\"margin: 0 auto; width: 80%\">\r\n        <p_panel :header=\"header\">\r\n            <p:dataTable :value=\"state.list\" :paginator=\"true\" :rows=\"10\" v-model:selection=\"localSelectedRow\"\r\n                class=\"p-datatable-generic\" @row-click=\"rowSelectListener\" selectionMode=\"single\" dataKey=\"id\"\r\n                paginatorTemplate=\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\"\r\n                :rowsPerPageOptions=\"[10, 20, 50]\" responsiveLayout=\"scroll\" filterDisplay=\"row\"\r\n                :globalFilterFields=\"globalFilterFields\" v-model:filters=\"filters\"\r\n                currentPageReportTemplate=\"Mostrando {first} a {last} de {totalRecords}\">\r\n                <template #header>\r\n                    <div class=\"flex justify-content-end\">\r\n                        <span class=\"p-input-icon-left \">\r\n                            <i class=\"pi pi-search\" />\r\n                            <p:inputText v-model=\"filters['global'].value\" placeholder=\"Buscar...\" />\r\n                        </span>\r\n                    </div>\r\n                </template>\r\n                <template #empty>\r\n                    No hay elementos disponibles.\r\n                </template>\r\n                <template #loading>\r\n                    Cargando elementos. Por favor, espera.\r\n                </template>\r\n                <p_column v-for=\"column in columns\" :field=\"column.field\" :header=\"column.title\" :key=\"column.field\"\r\n                    :ref=\"column.field\" :sortable=\"true\">\r\n                    <template #filter=\"{ filterModel, filterCallback }\">\r\n                        <p:inputText type=\"text\" v-model=\"filterModel.value\" @keyup=\"filterCallback()\"\r\n                            class=\"p-column-filter\" :placeholder=\"'Buscar por ' + column.title\" />\r\n                    </template>\r\n                </p_column>\r\n\r\n            </p:dataTable>\r\n        </p_panel>\r\n    </div>\r\n</template>\r\n  \r\n<script>\r\nimport { FilterMatchMode } from 'primevue/api';\r\nimport { ref, computed, inject } from 'vue';\r\n\r\n\r\nexport default {\r\n    props: {\r\n        columns: {\r\n            type: Array,\r\n            required: true\r\n        },\r\n        pathListDatatable: {\r\n            type: String,\r\n            required: false\r\n        },\r\n        header: {\r\n            type: String,\r\n            default: \"Lista de elementos\"\r\n        },\r\n        crudInputs: {\r\n            type: Object,\r\n            default: () => ({})\r\n        },\r\n        state: {\r\n            type: Object,\r\n            required: true\r\n        },\r\n    },\r\n    setup(props) {\r\n        const filters = ref({});\r\n        const rowSelectListener= inject('rowSelectListenerPedidos');\r\n        const localSelectedRow = ref(null);\r\n\r\n\r\n        function initFilters() {\r\n            const filtersObj = {\r\n                'global': { value: null, matchMode: FilterMatchMode.CONTAINS }\r\n            };\r\n            props.columns.forEach((column) => {\r\n                filtersObj[column.field] = {\r\n                    value: null,\r\n                    matchMode: FilterMatchMode.CONTAINS\r\n                };\r\n            });\r\n            filters.value = filtersObj;\r\n        }\r\n\r\n        initFilters();\r\n\r\n        const globalFilterFields = computed(() => {\r\n            return [\r\n                'global',\r\n                ...props.columns.map((column) => column.field)\r\n            ];\r\n        });\r\n        const currentPageReportTemplate = computed(() => {\r\n            return `Mostrando {first} a {last} de ${props.list.length} pedidos`;\r\n        });\r\n\r\n        return {\r\n            filters,\r\n            localSelectedRow,\r\n            globalFilterFields,\r\n            currentPageReportTemplate,\r\n            rowSelectListener\r\n\r\n        };\r\n    },\r\n\r\n    methods: {\r\n        // Aquí irían los métodos del componente\r\n        onRowSelect() {\r\n            //this.localSelectedRow = Object.assign({}, event.data);\r\n            console.log('row select del datatable hijo')\r\n            this.rowSelectListener(() => { this.localSelectedRow });\r\n        }\r\n    }\r\n};\r\n</script>\r\n  \r\n\r\n<style lang=\"scss\" scoped>\r\n::v-deep(.p-datatable.p-datatable-generic) {\r\n    .p-datatable-header {\r\n        padding: 1rem;\r\n        text-align: left;\r\n        font-size: 1.5rem;\r\n    }\r\n\r\n    .p-paginator {\r\n        padding: 1rem;\r\n    }\r\n\r\n    .p-datatable-thead>tr>th {\r\n        text-align: left;\r\n    }\r\n\r\n    .p-datatable-tbody>tr>td {\r\n        cursor: auto;\r\n    }\r\n\r\n    .p-dropdown-label:not(.p-placeholder) {\r\n        text-transform: uppercase;\r\n    }\r\n}\r\n\r\n</style>"],"mappings":"AAqCA,SAASA,eAAc,QAAS,cAAc;AAC9C,SAASC,GAAG,EAAEC,QAAQ,EAAEC,MAAK,QAAS,KAAK;AAG3C,eAAe;EACXC,KAAK,EAAE;IACHC,OAAO,EAAE;MACLC,IAAI,EAAEC,KAAK;MACXC,QAAQ,EAAE;IACd,CAAC;IACDC,iBAAiB,EAAE;MACfH,IAAI,EAAEI,MAAM;MACZF,QAAQ,EAAE;IACd,CAAC;IACDG,MAAM,EAAE;MACJL,IAAI,EAAEI,MAAM;MACZE,OAAO,EAAE;IACb,CAAC;IACDC,UAAU,EAAE;MACRP,IAAI,EAAEQ,MAAM;MACZF,OAAO,EAAEA,CAAA,MAAO,CAAC,CAAC;IACtB,CAAC;IACDG,KAAK,EAAE;MACHT,IAAI,EAAEQ,MAAM;MACZN,QAAQ,EAAE;IACd;EACJ,CAAC;EACDQ,KAAKA,CAACZ,KAAK,EAAE;IACT,MAAMa,OAAM,GAAIhB,GAAG,CAAC,CAAC,CAAC,CAAC;IACvB,MAAMiB,iBAAiB,GAAEf,MAAM,CAAC,0BAA0B,CAAC;IAC3D,MAAMgB,gBAAe,GAAIlB,GAAG,CAAC,IAAI,CAAC;IAGlC,SAASmB,WAAWA,CAAA,EAAG;MACnB,MAAMC,UAAS,GAAI;QACf,QAAQ,EAAE;UAAEC,KAAK,EAAE,IAAI;UAAEC,SAAS,EAAEvB,eAAe,CAACwB;QAAS;MACjE,CAAC;MACDpB,KAAK,CAACC,OAAO,CAACoB,OAAO,CAAEC,MAAM,IAAK;QAC9BL,UAAU,CAACK,MAAM,CAACC,KAAK,IAAI;UACvBL,KAAK,EAAE,IAAI;UACXC,SAAS,EAAEvB,eAAe,CAACwB;QAC/B,CAAC;MACL,CAAC,CAAC;MACFP,OAAO,CAACK,KAAI,GAAID,UAAU;IAC9B;IAEAD,WAAW,EAAE;IAEb,MAAMQ,kBAAiB,GAAI1B,QAAQ,CAAC,MAAM;MACtC,OAAO,CACH,QAAQ,EACR,GAAGE,KAAK,CAACC,OAAO,CAACwB,GAAG,CAAEH,MAAM,IAAKA,MAAM,CAACC,KAAK,EAChD;IACL,CAAC,CAAC;IACF,MAAMG,yBAAwB,GAAI5B,QAAQ,CAAC,MAAM;MAC7C,OAAQ,iCAAgCE,KAAK,CAAC2B,IAAI,CAACC,MAAM,UAAU;IACvE,CAAC,CAAC;IAEF,OAAO;MACHf,OAAO;MACPE,gBAAgB;MAChBS,kBAAkB;MAClBE,yBAAyB;MACzBZ;IAEJ,CAAC;EACL,CAAC;EAEDe,OAAO,EAAE;IACL;IACAC,WAAWA,CAAA,EAAG;MACV;MACAC,OAAO,CAACC,GAAG,CAAC,+BAA+B;MAC3C,IAAI,CAAClB,iBAAiB,CAAC,MAAM;QAAE,IAAI,CAACC,gBAAe;MAAE,CAAC,CAAC;IAC3D;EACJ;AACJ,CAAC"},"metadata":{},"sourceType":"module"}