{"ast":null,"code":"import { reactive, nextTick, onMounted } from 'vue';\nexport function tableBean(service, axiosConfig) {\n  const state = reactive({\n    editedRow: null,\n    selectedRow: null,\n    list: [],\n    disabled: false\n  });\n  const list = async () => {\n    console.log('Entrando en list de tableBean');\n    try {\n      const response = await service.getAll(axiosConfig);\n      state.list = response.data;\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  onMounted(list);\n  const rowSelectListener = async selectedRow => {\n    console.log('Dentro del rowSelectListener del composable');\n    state.selectedRow = selectedRow;\n    state.editedRow = {\n      ...selectedRow\n    };\n    await nextTick();\n    console.log('SelectedRow:', state.selectedRow);\n    console.log('EditedRow:', state.editedRow);\n  };\n  const create = () => {\n    state.disabled = false;\n    state.editedRow = null;\n  };\n  const save = async () => {\n    console.log('Dentro del save del composable');\n    console.log(state.editedRow);\n    try {\n      await service.save(state.editedRow, axiosConfig);\n      state.disabled = true;\n      await nextTick();\n      state.list = await service.getAll(axiosConfig);\n      ToastService.add({\n        severity: 'success',\n        summary: 'Guardando',\n        detail: 'REGISTRO CREADO CORRECTAMENTE. GUARDADO EN BASE DE DATOS',\n        life: 3000\n      });\n    } catch (error) {\n      console.log('primer catch');\n      console.log(error);\n      if (error.response.status === 400) {\n        const errorMessage = error.response.data;\n        ToastService.add({\n          severity: 'error',\n          summary: 'Error',\n          detail: errorMessage,\n          life: 3000\n        });\n      } else {\n        console.log('segundo catch');\n        console.log(error);\n        ToastService.add({\n          severity: 'error',\n          summary: 'Error',\n          detail: 'No se pudo guardar el registro. Por favor, inténtalo de nuevo más tarde.',\n          life: 3000\n        });\n      }\n    }\n  };\n  const remove = async rowToDelete => {\n    try {\n      await service.remove(rowToDelete.id, axiosConfig);\n      state.list = await service.getAll(axiosConfig);\n      state.disabled = true;\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  return {\n    state,\n    save,\n    remove,\n    create,\n    list,\n    rowSelectListener\n  };\n}","map":{"version":3,"names":["reactive","nextTick","onMounted","tableBean","service","axiosConfig","state","editedRow","selectedRow","list","disabled","console","log","response","getAll","data","error","rowSelectListener","create","save","ToastService","add","severity","summary","detail","life","status","errorMessage","remove","rowToDelete","id"],"sources":["C:/Users/emalc/OneDrive/Escritorio/CRUD_keycloak_primeVue/keycloak-workshop/frontend-vuejs/src/composables/tableBean.js"],"sourcesContent":["import { reactive, nextTick, onMounted } from 'vue';\r\n\r\nexport function tableBean(service, axiosConfig) {\r\n\r\n  const state = reactive({\r\n    editedRow: null,\r\n    selectedRow: null,\r\n    list: [],\r\n    disabled: false,\r\n  });\r\n\r\n  const list = async () => {\r\n    console.log('Entrando en list de tableBean')\r\n    try {\r\n      const response = await service.getAll(axiosConfig);\r\n      state.list = response.data;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n\r\n  onMounted(list);\r\n\r\n  const rowSelectListener = async (selectedRow) => {\r\n    console.log('Dentro del rowSelectListener del composable');\r\n    state.selectedRow = selectedRow;\r\n    state.editedRow = { ...selectedRow };\r\n    await nextTick();\r\n\r\n    console.log('SelectedRow:', state.selectedRow);\r\n    console.log('EditedRow:', state.editedRow);\r\n  };\r\n\r\n  const create = () => {\r\n    state.disabled = false;\r\n    state.editedRow = null;\r\n  };\r\n\r\n  const save = async () => {\r\n    console.log('Dentro del save del composable')\r\n    console.log(state.editedRow);\r\n    try {\r\n      await service.save(state.editedRow, axiosConfig);\r\n      state.disabled = true;\r\n      await nextTick();\r\n      state.list = await service.getAll(axiosConfig);\r\n      ToastService.add({\r\n        severity: 'success',\r\n        summary: 'Guardando',\r\n        detail: 'REGISTRO CREADO CORRECTAMENTE. GUARDADO EN BASE DE DATOS',\r\n        life: 3000\r\n      });\r\n    } catch (error) {\r\n      console.log('primer catch');\r\n      console.log(error);\r\n      if (error.response.status === 400) {\r\n        const errorMessage = error.response.data;\r\n        ToastService.add({\r\n          severity: 'error',\r\n          summary: 'Error',\r\n          detail: errorMessage,\r\n          life: 3000\r\n        });\r\n      } else {\r\n        console.log('segundo catch');\r\n        console.log(error);\r\n        ToastService.add({\r\n          severity: 'error',\r\n          summary: 'Error',\r\n          detail: 'No se pudo guardar el registro. Por favor, inténtalo de nuevo más tarde.',\r\n          life: 3000\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n\r\n\r\n  const remove = async (rowToDelete) => {\r\n    try {\r\n      await service.remove(rowToDelete.id, axiosConfig);\r\n      state.list = await service.getAll(axiosConfig);\r\n      state.disabled = true;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return {\r\n    state,\r\n    save,\r\n    remove,\r\n    create,\r\n    list,\r\n    rowSelectListener\r\n  };\r\n}\r\n"],"mappings":"AAAA,SAASA,QAAQ,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,KAAK;AAEnD,OAAO,SAASC,SAASA,CAACC,OAAO,EAAEC,WAAW,EAAE;EAE9C,MAAMC,KAAK,GAAGN,QAAQ,CAAC;IACrBO,SAAS,EAAE,IAAI;IACfC,WAAW,EAAE,IAAI;IACjBC,IAAI,EAAE,EAAE;IACRC,QAAQ,EAAE;EACZ,CAAC,CAAC;EAEF,MAAMD,IAAI,GAAG,MAAAA,CAAA,KAAY;IACvBE,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;IAC5C,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMT,OAAO,CAACU,MAAM,CAACT,WAAW,CAAC;MAClDC,KAAK,CAACG,IAAI,GAAGI,QAAQ,CAACE,IAAI;IAC5B,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdL,OAAO,CAACC,GAAG,CAACI,KAAK,CAAC;IACpB;EACF,CAAC;EAGDd,SAAS,CAACO,IAAI,CAAC;EAEf,MAAMQ,iBAAiB,GAAG,MAAOT,WAAW,IAAK;IAC/CG,OAAO,CAACC,GAAG,CAAC,6CAA6C,CAAC;IAC1DN,KAAK,CAACE,WAAW,GAAGA,WAAW;IAC/BF,KAAK,CAACC,SAAS,GAAG;MAAE,GAAGC;IAAY,CAAC;IACpC,MAAMP,QAAQ,EAAE;IAEhBU,OAAO,CAACC,GAAG,CAAC,cAAc,EAAEN,KAAK,CAACE,WAAW,CAAC;IAC9CG,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEN,KAAK,CAACC,SAAS,CAAC;EAC5C,CAAC;EAED,MAAMW,MAAM,GAAGA,CAAA,KAAM;IACnBZ,KAAK,CAACI,QAAQ,GAAG,KAAK;IACtBJ,KAAK,CAACC,SAAS,GAAG,IAAI;EACxB,CAAC;EAED,MAAMY,IAAI,GAAG,MAAAA,CAAA,KAAY;IACvBR,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;IAC7CD,OAAO,CAACC,GAAG,CAACN,KAAK,CAACC,SAAS,CAAC;IAC5B,IAAI;MACF,MAAMH,OAAO,CAACe,IAAI,CAACb,KAAK,CAACC,SAAS,EAAEF,WAAW,CAAC;MAChDC,KAAK,CAACI,QAAQ,GAAG,IAAI;MACrB,MAAMT,QAAQ,EAAE;MAChBK,KAAK,CAACG,IAAI,GAAG,MAAML,OAAO,CAACU,MAAM,CAACT,WAAW,CAAC;MAC9Ce,YAAY,CAACC,GAAG,CAAC;QACfC,QAAQ,EAAE,SAAS;QACnBC,OAAO,EAAE,WAAW;QACpBC,MAAM,EAAE,0DAA0D;QAClEC,IAAI,EAAE;MACR,CAAC,CAAC;IACJ,CAAC,CAAC,OAAOT,KAAK,EAAE;MACdL,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;MAC3BD,OAAO,CAACC,GAAG,CAACI,KAAK,CAAC;MAClB,IAAIA,KAAK,CAACH,QAAQ,CAACa,MAAM,KAAK,GAAG,EAAE;QACjC,MAAMC,YAAY,GAAGX,KAAK,CAACH,QAAQ,CAACE,IAAI;QACxCK,YAAY,CAACC,GAAG,CAAC;UACfC,QAAQ,EAAE,OAAO;UACjBC,OAAO,EAAE,OAAO;UAChBC,MAAM,EAAEG,YAAY;UACpBF,IAAI,EAAE;QACR,CAAC,CAAC;MACJ,CAAC,MAAM;QACLd,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC;QAC5BD,OAAO,CAACC,GAAG,CAACI,KAAK,CAAC;QAClBI,YAAY,CAACC,GAAG,CAAC;UACfC,QAAQ,EAAE,OAAO;UACjBC,OAAO,EAAE,OAAO;UAChBC,MAAM,EAAE,0EAA0E;UAClFC,IAAI,EAAE;QACR,CAAC,CAAC;MACJ;IACF;EACF,CAAC;EAID,MAAMG,MAAM,GAAG,MAAOC,WAAW,IAAK;IACpC,IAAI;MACF,MAAMzB,OAAO,CAACwB,MAAM,CAACC,WAAW,CAACC,EAAE,EAAEzB,WAAW,CAAC;MACjDC,KAAK,CAACG,IAAI,GAAG,MAAML,OAAO,CAACU,MAAM,CAACT,WAAW,CAAC;MAC9CC,KAAK,CAACI,QAAQ,GAAG,IAAI;IACvB,CAAC,CAAC,OAAOM,KAAK,EAAE;MACdL,OAAO,CAACC,GAAG,CAACI,KAAK,CAAC;IACpB;EACF,CAAC;EAED,OAAO;IACLV,KAAK;IACLa,IAAI;IACJS,MAAM;IACNV,MAAM;IACNT,IAAI;IACJQ;EACF,CAAC;AACH"},"metadata":{},"sourceType":"module"}