{"ast":null,"code":"import { FilterMatchMode } from 'primevue/api';\nimport { mapGetters } from 'vuex';\nimport axios from \"axios\";\nimport ZDialog from './ZDialog.vue';\nexport default {\n  props: {\n    columns: {\n      type: Array,\n      required: true\n    },\n    data: {\n      type: Array,\n      required: true\n    },\n    header: {\n      type: String,\n      default: \"Lista de elementos\"\n    },\n    editedRow: {\n      type: Object,\n      default: null\n    },\n    crudInputs: {\n      type: Object,\n      default: function () {\n        return {};\n      }\n    },\n    selectedProduct: {\n      type: Object,\n      default: null\n    },\n    headerDialogBoton: {\n      type: String,\n      default: \"Lista de elementos\"\n    },\n    labelDialogBoton: {\n      type: String,\n      default: \"Lista de elementos\"\n    }\n  },\n  components: {\n    ZDialog\n  },\n\n  data() {\n    return {\n      filters: {},\n      selectedRow: null,\n      localEditedRow: Object.assign({}, this.editedRow),\n      optionsData: [],\n      customValueInput: null,\n      localHeaderDialogBoton: null,\n      localLabelDialogBoton: null\n    };\n  },\n\n  watch: {\n    editedRow: {\n      handler: function (newVal) {\n        this.localEditedRow = Object.assign({}, newVal);\n      },\n      deep: true\n    },\n    headerDialogBoton: {\n      handler: function (newVal) {\n        this.localHeaderDialogBoton = Object.assign({}, newVal);\n      },\n      deep: true\n    },\n    labelDialogBoton: {\n      handler: function (newVal) {\n        this.localLabelDialogBoton = Object.assign({}, newVal);\n      },\n      deep: true\n    }\n  },\n  computed: {\n    globalFilterFields() {\n      return ['global', ...this.columns.map(column => column.field)];\n    },\n\n    currentPageReportTemplate() {\n      return `Mostrando {first} a {last} de ${this.data.length} pedidos`;\n    },\n\n    currentSelection() {\n      return this.selectedRow[0] || {};\n    },\n\n    ...mapGetters({\n      username: 'username',\n      keycloakToken: 'keycloakToken',\n      keycloakTokenParsed: 'keycloakTokenParsed',\n      axiosConfig: 'axiosConfig',\n      roles: 'roles'\n    }),\n\n    getValue() {\n      return value => this.localEditedRow[value];\n    }\n\n  },\n\n  async created() {\n    console.log(\"created\");\n    this.initFilters();\n  },\n\n  mounted() {\n    // Recorre los inputs y si existe pathList, realiza una solicitud GET para obtener las opciones del selectOneMenu\n    this.crudInputs.forEach(async input => {\n      if (input.component.includes('select') && input.pathList) {\n        const response = await axios.get(input.pathList, this.axiosConfig);\n        const parsedData = response.data;\n        input.options = parsedData.map(item => ({\n          label: item.nombre,\n          value: item\n        }));\n      }\n    });\n  },\n\n  methods: {\n    onRowSelect(event) {\n      this.localEditedRow = Object.assign({}, event.data);\n    },\n\n    initFilters() {\n      const filters = {\n        'global': {\n          value: null,\n          matchMode: FilterMatchMode.CONTAINS\n        }\n      };\n      this.columns.forEach(column => {\n        filters[column.field] = {\n          value: null,\n          matchMode: FilterMatchMode.CONTAINS\n        };\n      });\n      this.filters = filters;\n    },\n\n    updateLocalEditedRow(value, key) {\n      this.$set(this.localEditedRow, key, value);\n    },\n\n    loadLazyData() {\n      this.loading = true;\n      setTimeout(() => {\n        this.customerService.getCustomers({\n          lazyEvent: JSON.stringify(this.lazyParams)\n        }).then(data => {\n          this.customers = data.customers;\n          this.totalRecords = data.totalRecords;\n          this.loading = false;\n        });\n      }, Math.random() * 1000 + 250);\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["FilterMatchMode","mapGetters","axios","ZDialog","props","columns","type","Array","required","data","header","String","default","editedRow","Object","crudInputs","selectedProduct","headerDialogBoton","labelDialogBoton","components","filters","selectedRow","localEditedRow","assign","optionsData","customValueInput","localHeaderDialogBoton","localLabelDialogBoton","watch","handler","newVal","deep","computed","globalFilterFields","map","column","field","currentPageReportTemplate","length","currentSelection","username","keycloakToken","keycloakTokenParsed","axiosConfig","roles","getValue","value","created","console","log","initFilters","mounted","forEach","input","component","includes","pathList","response","get","parsedData","options","item","label","nombre","methods","onRowSelect","event","matchMode","CONTAINS","updateLocalEditedRow","key","$set","loadLazyData","loading","setTimeout","customerService","getCustomers","lazyEvent","JSON","stringify","lazyParams","then","customers","totalRecords","Math","random"],"sourceRoot":"","sources":["C:\\Users\\emalc\\OneDrive\\Escritorio\\CRUD_keycloak_primeVue\\keycloak-workshop\\frontend-vuejs\\src\\componentes\\GenericCRUD.vue"],"sourcesContent":["<template>\r\n    <div style=\"margin: 0 auto; width: 80%\">\r\n        <p_panel :header=\"header\">\r\n            <p:dataTable :value=\"data\" :paginator=\"true\" :rows=\"10\" v-model:selection=\"selectedRow\"\r\n                class=\"p-datatable-pedidos\" @row-click=\"onRowSelect\" selectionMode=\"single\" dataKey=\"id\"\r\n                paginatorTemplate=\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\"\r\n                :rowsPerPageOptions=\"[10, 20, 50]\" responsiveLayout=\"scroll\" filterDisplay=\"row\"\r\n                :globalFilterFields=\"globalFilterFields\" v-model:filters=\"filters\"\r\n                currentPageReportTemplate=\"Mostrando {first} a {last} de {totalRecords}\">\r\n                <template #header>\r\n                    <div class=\"flex justify-content-end\">\r\n                        <span class=\"p-input-icon-left \">\r\n                            <i class=\"pi pi-search\" />\r\n                            <p:inputText v-model=\"filters['global'].value\" placeholder=\"Buscar...\" />\r\n                        </span>\r\n                    </div>\r\n                </template>\r\n                <template #empty>\r\n                    No hay elementos disponibles.\r\n                </template>\r\n                <template #loading>\r\n                    Cargando elementos. Por favor, espera.\r\n                </template>\r\n                <p_column v-for=\"column in columns\" :field=\"column.field\" :header=\"column.title\" :key=\"column.field\"\r\n                    :ref=\"column.field\" :sortable=\"true\">\r\n                    <template #filter=\"{ filterModel, filterCallback }\">\r\n                        <p:inputText type=\"text\" v-model=\"filterModel.value\" @keyup=\"filterCallback()\"\r\n                            class=\"p-column-filter\" :placeholder=\"'Buscar por ' + column.title\" />\r\n                    </template>\r\n                </p_column>\r\n\r\n            </p:dataTable>\r\n        </p_panel>\r\n    </div>\r\n    <p_panel style=\"margin-bottom: 20px;margin: 0 auto; width: 80%\">\r\n        <div class=\"panel-flex\" style=\"margin-bottom: 20px;margin: 0 auto; width: 80%\">\r\n            <div v-for=\"(input, index) in crudInputs\" :key=\"index\"\r\n                style=\"display: inline-block; margin-right: 10px; vertical-align: middle;\">\r\n                <label :for=\"input.value\" style=\"display: block;\">{{ input.label }}</label>\r\n                <component :is=\"input.component\" :options=\"input.options\" :option-label=\"(option) => option.label\"\r\n                    :option-value=\"(option) => option.value\" v-model=\"localEditedRow[input.value]\"\r\n                    style=\"width: 200px;\">\r\n                </component>\r\n\r\n            </div>\r\n            <ZDialog :data=\"data\" :columns=\"columns\" :labelBoton=\"labelBoton\" :headerBoton=\"headerBoton\"></ZDialog>\r\n        </div>\r\n    </p_panel>\r\n\r\n\r\n    <h2>\r\n        <p>El valor del estado seleccionado es: {{ localEditedRow[\"estadoUno\"] }}</p>\r\n        <p>El valor del producto seleccionado es: {{ localEditedRow[\"producto\"] }}</p>\r\n        <p>El valor de los productos seleccionados es: {{ localEditedRow[\"productos\"] }}</p>\r\n        <p>El valor del nombre es: {{ localEditedRow[\"name\"] }}</p>\r\n    </h2>\r\n</template>\r\n  \r\n<script>\r\nimport { FilterMatchMode } from 'primevue/api';\r\nimport { mapGetters } from 'vuex';\r\nimport axios from \"axios\";\r\nimport ZDialog from './ZDialog.vue';\r\nexport default {\r\n\r\n    props: {\r\n        columns: {\r\n            type: Array,\r\n            required: true\r\n        },\r\n        data: {\r\n            type: Array,\r\n            required: true\r\n        },\r\n        header: {\r\n            type: String,\r\n            default: \"Lista de elementos\"\r\n        },\r\n        editedRow: {\r\n            type: Object,\r\n            default: null\r\n        },\r\n        crudInputs: {\r\n            type: Object,\r\n            default: function () {\r\n                return {}\r\n            }\r\n        },\r\n        selectedProduct: {\r\n            type: Object,\r\n            default: null\r\n        },\r\n        headerDialogBoton: {\r\n            type: String,\r\n            default: \"Lista de elementos\"\r\n        },\r\n        labelDialogBoton: {\r\n            type: String,\r\n            default: \"Lista de elementos\"\r\n        },\r\n\r\n    },\r\n    components: {\r\n        ZDialog,\r\n    \r\n    },\r\n    data() {\r\n        return {\r\n            filters: {},\r\n            selectedRow: null,\r\n            localEditedRow: Object.assign({}, this.editedRow),\r\n            optionsData: [],\r\n            customValueInput: null,\r\n            localHeaderDialogBoton: null,\r\n            localLabelDialogBoton: null\r\n        }\r\n\r\n    },\r\n    watch: {\r\n        editedRow: {\r\n            handler: function (newVal) {\r\n                this.localEditedRow = Object.assign({}, newVal);\r\n            },\r\n            deep: true\r\n        },\r\n        headerDialogBoton: {\r\n            handler: function (newVal) {\r\n                this.localHeaderDialogBoton = Object.assign({}, newVal);\r\n            },\r\n            deep: true\r\n        },\r\n        labelDialogBoton: {\r\n            handler: function (newVal) {\r\n                this.localLabelDialogBoton = Object.assign({}, newVal);\r\n            },\r\n            deep: true\r\n        },\r\n\r\n    }\r\n    ,\r\n    computed: {\r\n        globalFilterFields() {\r\n            return [\r\n                'global',\r\n                ...this.columns.map((column) => column.field)\r\n            ];\r\n        },\r\n        currentPageReportTemplate() {\r\n            return `Mostrando {first} a {last} de ${this.data.length} pedidos`;\r\n        },\r\n        currentSelection() {\r\n            return this.selectedRow[0] || {};\r\n        },\r\n        ...mapGetters({\r\n            username: 'username',\r\n            keycloakToken: 'keycloakToken',\r\n            keycloakTokenParsed: 'keycloakTokenParsed',\r\n            axiosConfig: 'axiosConfig',\r\n            roles: 'roles',\r\n        }),\r\n        getValue() {\r\n            return (value) => this.localEditedRow[value];\r\n        }\r\n\r\n    },\r\n    async created() {\r\n        console.log(\"created\");\r\n        this.initFilters();\r\n    },\r\n    mounted() {\r\n        // Recorre los inputs y si existe pathList, realiza una solicitud GET para obtener las opciones del selectOneMenu\r\n        this.crudInputs.forEach(async (input) => {\r\n            if (input.component.includes('select') && input.pathList) {\r\n                const response = await axios.get(input.pathList, this.axiosConfig);\r\n                const parsedData = response.data;\r\n                input.options = parsedData.map((item) => ({\r\n                    label: item.nombre,\r\n                    value: item,\r\n                }));\r\n            }\r\n        });\r\n    },\r\n    methods: {\r\n        onRowSelect(event) {\r\n            this.localEditedRow = Object.assign({}, event.data);\r\n        },\r\n        initFilters() {\r\n            const filters = {\r\n                'global': { value: null, matchMode: FilterMatchMode.CONTAINS }\r\n            };\r\n            this.columns.forEach((column) => {\r\n                filters[column.field] = {\r\n                    value: null,\r\n                    matchMode: FilterMatchMode.CONTAINS\r\n                };\r\n            });\r\n            this.filters = filters;\r\n        },\r\n        updateLocalEditedRow(value, key) {\r\n            this.$set(this.localEditedRow, key, value);\r\n        },\r\n        loadLazyData() {\r\n            this.loading = true;\r\n\r\n            setTimeout(() => {\r\n                this.customerService.getCustomers(\r\n                    {lazyEvent: JSON.stringify( this.lazyParams )})\r\n                        .then(data => {\r\n                            this.customers = data.customers;\r\n                            this.totalRecords = data.totalRecords;\r\n                            this.loading = false;\r\n                    }\r\n                );\r\n            }, Math.random() * 1000 + 250);\r\n        },\r\n    }\r\n}\r\n</script>\r\n  \r\n\r\n<style lang=\"scss\" scoped>\r\n::v-deep(.p-datatable.p-datatable-pedidos) {\r\n    .p-datatable-header {\r\n        padding: 1rem;\r\n        text-align: left;\r\n        font-size: 1.5rem;\r\n    }\r\n\r\n    .p-paginator {\r\n        padding: 1rem;\r\n    }\r\n\r\n    .p-datatable-thead>tr>th {\r\n        text-align: left;\r\n    }\r\n\r\n    .p-datatable-tbody>tr>td {\r\n        cursor: auto;\r\n    }\r\n\r\n    .p-dropdown-label:not(.p-placeholder) {\r\n        text-transform: uppercase;\r\n    }\r\n}\r\n\r\n.panel-flex {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: flex-start;\r\n    align-items: flex-start;\r\n}\r\n\r\n.panel-flex>div {\r\n    flex-basis: calc(25% - 10px);\r\n    margin-right: 10px;\r\n    margin-bottom: 20px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}