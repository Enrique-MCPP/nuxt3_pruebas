{"ast":null,"code":"import { createApp } from 'vue';\nimport App from './App.vue';\nimport Keycloak from 'keycloak-js';\nimport PrimeVue from 'primevue/config';\nimport 'primevue/resources/themes/lara-light-indigo/theme.css';\nimport 'primevue/resources/primevue.min.css';\nimport 'primeicons/primeicons.css';\nimport Toast from 'primevue/toast';\nimport InputText from 'primevue/inputtext';\nimport DataTable from 'primevue/datatable';\nimport Column from 'primevue/column';\nimport Button from 'primevue/button';\nconst app = createApp(App);\napp.use(PrimeVue);\napp.component('DataTable', DataTable);\napp.component('Button', Button);\napp.component('Column', Column); // JSON VIEWER\n\nimport JsonViewer from \"vue3-json-viewer\";\nimport \"vue3-json-viewer/dist/index.css\";\napp.use(JsonViewer); // EVENTBUS\n\nimport mitt from 'mitt';\nconst emitter = mitt();\napp.config.globalProperties.emitter = emitter; // VUEX\n\nimport store from \"@/store/user\";\napp.use(store); // AXIOS\n\nimport axios from 'axios';\nimport VueAxios from 'vue-axios';\napp.use(VueAxios, axios); // KEYCLOAK\n\nconst initOptions = {\n  url: process.env.VUE_APP_KEYCLOAK_API_URL,\n  realm: process.env.VUE_APP_KEYCLOAK_REALM,\n  clientId: process.env.VUE_APP_KEYCLOAK_CLIENT_ID\n};\nconst keycloak = Keycloak(initOptions);\nkeycloak.init({\n  onLoad: 'login-required'\n}).then(() => {\n  store.commit('setUserName', keycloak.tokenParsed.preferred_username);\n  store.commit('setKeycloakToken', keycloak.token);\n  store.commit('setKeycloakTokenParsed', keycloak.tokenParsed);\n  emitter.on('keycloak-logout', () => {\n    keycloak.logout();\n  }); // Token Refresh\n\n  setInterval(() => {\n    keycloak.updateToken(70).then(refreshed => {\n      if (refreshed) {\n        store.commit('setUserName', keycloak.tokenParsed.preferred_username);\n        store.commit('setKeycloakToken', keycloak.token);\n        store.commit('setKeycloakTokenParsed', keycloak.tokenParsed);\n        console.info('Token refreshed' + refreshed);\n      } else {\n        console.warn('Token not refreshed, valid for ' + Math.round(keycloak.tokenParsed.exp + keycloak.timeSkew - new Date().getTime() / 1000) + ' seconds');\n      }\n    }).catch(() => {\n      keycloak.logout();\n    });\n  }, 60 * 1000);\n});\napp.mount('#app');","map":{"version":3,"sources":["C:/Users/emalc/OneDrive/Escritorio/CRUD_keycloak_primeVue/keycloak-workshop/frontend-vuejs/src/main.js"],"names":["createApp","App","Keycloak","PrimeVue","Toast","InputText","DataTable","Column","Button","app","use","component","JsonViewer","mitt","emitter","config","globalProperties","store","axios","VueAxios","initOptions","url","process","env","VUE_APP_KEYCLOAK_API_URL","realm","VUE_APP_KEYCLOAK_REALM","clientId","VUE_APP_KEYCLOAK_CLIENT_ID","keycloak","init","onLoad","then","commit","tokenParsed","preferred_username","token","on","logout","setInterval","updateToken","refreshed","console","info","warn","Math","round","exp","timeSkew","Date","getTime","catch","mount"],"mappings":"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","sourcesContent":["import { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport Keycloak from 'keycloak-js'\r\nimport PrimeVue from 'primevue/config';\r\nimport 'primevue/resources/themes/lara-light-indigo/theme.css'\r\nimport 'primevue/resources/primevue.min.css'   \r\nimport 'primeicons/primeicons.css'   \r\nimport Toast from 'primevue/toast';\r\nimport InputText from 'primevue/inputtext';\r\nimport DataTable from 'primevue/datatable';\r\nimport Column from 'primevue/column';\r\n\r\nimport Button from 'primevue/button';\r\n\r\nconst app = createApp(App);\r\napp.use(PrimeVue);\r\napp.component('DataTable', DataTable);\r\napp.component('Button', Button)\r\napp.component('Column', Column);\r\n\r\n// JSON VIEWER\r\nimport JsonViewer from \"vue3-json-viewer\";\r\nimport \"vue3-json-viewer/dist/index.css\";\r\napp.use(JsonViewer);\r\n\r\n// EVENTBUS\r\nimport mitt from 'mitt';\r\nconst emitter = mitt();\r\napp.config.globalProperties.emitter = emitter;\r\n\r\n// VUEX\r\nimport store from \"@/store/user\";\r\napp.use(store)\r\n\r\n// AXIOS\r\nimport axios from 'axios'\r\nimport VueAxios from 'vue-axios'\r\napp.use(VueAxios, axios)\r\n\r\n\r\n// KEYCLOAK\r\nconst initOptions = {\r\n    url: process.env.VUE_APP_KEYCLOAK_API_URL,\r\n    realm: process.env.VUE_APP_KEYCLOAK_REALM,\r\n    clientId: process.env.VUE_APP_KEYCLOAK_CLIENT_ID,\r\n}\r\n\r\nconst keycloak = Keycloak(initOptions)\r\n\r\nkeycloak.init({ onLoad: 'login-required' }).then(() => {\r\n\r\n    store.commit('setUserName', keycloak.tokenParsed.preferred_username)\r\n    store.commit('setKeycloakToken', keycloak.token)\r\n    store.commit('setKeycloakTokenParsed', keycloak.tokenParsed)\r\n\r\n    emitter.on('keycloak-logout', () => {\r\n        keycloak.logout()\r\n    })\r\n\r\n    // Token Refresh\r\n    setInterval(() => {\r\n        keycloak\r\n            .updateToken(70)\r\n            .then((refreshed) => {\r\n                if (refreshed) {\r\n                    store.commit('setUserName', keycloak.tokenParsed.preferred_username)\r\n                    store.commit('setKeycloakToken', keycloak.token)\r\n                    store.commit('setKeycloakTokenParsed', keycloak.tokenParsed)\r\n\r\n                    console.info('Token refreshed' + refreshed)\r\n                } else {\r\n                    console.warn('Token not refreshed, valid for ' + Math.round(keycloak.tokenParsed.exp + keycloak.timeSkew - new Date().getTime() / 1000) + ' seconds')\r\n                }\r\n            })\r\n            .catch(() => {\r\n                keycloak.logout()\r\n            })\r\n    }, 60 * 1000)\r\n})\r\n\r\napp.mount('#app')"]},"metadata":{},"sourceType":"module"}