{"ast":null,"code":"import { createApp } from 'vue';\nimport App from './App.vue';\nimport Keycloak from 'keycloak-js';\nimport PrimeVue from 'primevue/config';\nimport VTooltip from 'v-tooltip';\nimport 'primevue/resources/themes/nova/theme.css';\n//import 'primevue/resources/themes/lara-light-indigo/theme.css'\nimport 'primevue/resources/primevue.min.css';\nimport 'primeicons/primeicons.css';\nimport Toast from 'primevue/toast';\nimport ToastService from 'primevue/toastservice';\nimport InputText from 'primevue/inputtext';\nimport DataTable from 'primevue/datatable';\nimport Column from 'primevue/column';\nimport Panel from 'primevue/panel';\nimport Menubar from 'primevue/menubar';\nimport Button from 'primevue/button';\nimport Dropdown from 'primevue/dropdown';\nimport Dialog from 'primevue/dialog';\nimport Textarea from 'primevue/textarea';\nimport MultiSelect from 'primevue/multiselect';\nimport TriStateCheckbox from 'primevue/tristatecheckbox';\nimport Calendar from 'primevue/calendar';\nimport Card from 'primevue/card';\nconst app = createApp(App);\napp.use(PrimeVue);\napp.use(ToastService);\napp.use(VTooltip);\napp.component('p:inputText', InputText);\napp.component('p_toast', Toast);\napp.component('p:dataTable', DataTable);\napp.component('p_column', Column);\napp.component('p:commandButton', Button);\napp.component('p_panel', Panel);\napp.component('p_menubar', Menubar);\napp.component('p:selectOneMenu', Dropdown);\napp.component('p_dialog', Dialog);\napp.component('TextArea', Textarea);\napp.component('p:selectCheckBoxMenu', MultiSelect);\napp.component('p:triStateCheckbox', TriStateCheckbox);\napp.component('p_calendar', Calendar);\napp.component('p_card', Card);\n\n// JSON VIEWER\nimport JsonViewer from \"vue3-json-viewer\";\nimport \"vue3-json-viewer/dist/index.css\";\napp.use(JsonViewer);\nimport mitt from 'mitt';\nconst emitter = mitt();\napp.config.globalProperties.emitter = emitter;\n\n// VUEX\nimport store from \"@/store/user\";\napp.use(store); // usa el store en tu aplicación\n\n// AXIOS\nimport axios from 'axios';\nimport VueAxios from 'vue-axios';\napp.use(VueAxios, axios);\n\n// KEYCLOAK\nconst initOptions = {\n  url: process.env.VUE_APP_KEYCLOAK_API_URL,\n  realm: process.env.VUE_APP_KEYCLOAK_REALM,\n  clientId: process.env.VUE_APP_KEYCLOAK_CLIENT_ID\n};\nconst keycloak = Keycloak(initOptions);\nkeycloak.init({\n  onLoad: 'login-required'\n}).then(() => {\n  let roles = keycloak.realmAccess.roles;\n  roles = roles.filter(role => !role.includes(\"offline_access\") && !role.includes(\"uma_authorization\") && !role.includes(\"default-roles-spring-boot-microservices-realm\"));\n  store.commit('setUserName', keycloak.tokenParsed.preferred_username);\n  store.commit('setKeycloakToken', keycloak.token);\n  store.commit('setKeycloakTokenParsed', keycloak.tokenParsed);\n  store.commit('setRoles', roles);\n  emitter.on('keycloak-logout', () => {\n    keycloak.logout();\n  });\n\n  // Token Refresh\n  setInterval(() => {\n    keycloak.updateToken(70).then(refreshed => {\n      if (refreshed) {\n        let roles = keycloak.realmAccess.roles;\n        roles = roles.filter(role => !role.includes(\"offline_access\") && !role.includes(\"uma_authorization\") && !role.includes(\"default-roles-spring-boot-microservices-realm\"));\n        store.commit('setUserName', keycloak.tokenParsed.preferred_username);\n        store.commit('setKeycloakToken', keycloak.token);\n        store.commit('setKeycloakTokenParsed', keycloak.tokenParsed);\n        store.commit('setRoles', roles);\n        console.info('Token refreshed' + refreshed);\n      } else {\n        console.warn('Token not refreshed, valid for ' + Math.round(keycloak.tokenParsed.exp + keycloak.timeSkew - new Date().getTime() / 1000) + ' seconds');\n      }\n    }).catch(() => {\n      keycloak.logout();\n    });\n  }, 60 * 1000);\n  app.mount('#app');\n});","map":{"version":3,"names":["createApp","App","Keycloak","PrimeVue","VTooltip","Toast","ToastService","InputText","DataTable","Column","Panel","Menubar","Button","Dropdown","Dialog","Textarea","MultiSelect","TriStateCheckbox","Calendar","Card","app","use","component","JsonViewer","mitt","emitter","config","globalProperties","store","axios","VueAxios","initOptions","url","process","env","VUE_APP_KEYCLOAK_API_URL","realm","VUE_APP_KEYCLOAK_REALM","clientId","VUE_APP_KEYCLOAK_CLIENT_ID","keycloak","init","onLoad","then","roles","realmAccess","filter","role","includes","commit","tokenParsed","preferred_username","token","on","logout","setInterval","updateToken","refreshed","console","info","warn","Math","round","exp","timeSkew","Date","getTime","catch","mount"],"sources":["C:/Users/emalc/OneDrive/Escritorio/CRUD_keycloak_primeVue/keycloak-workshop/frontend-vuejs/src/main.js"],"sourcesContent":["import { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport Keycloak from 'keycloak-js'\r\nimport PrimeVue from 'primevue/config';\r\nimport VTooltip from 'v-tooltip';\r\n\r\nimport 'primevue/resources/themes/nova/theme.css'\r\n//import 'primevue/resources/themes/lara-light-indigo/theme.css'\r\nimport 'primevue/resources/primevue.min.css'\r\nimport 'primeicons/primeicons.css'\r\nimport Toast from 'primevue/toast';\r\nimport ToastService from 'primevue/toastservice';\r\nimport InputText from 'primevue/inputtext';\r\nimport DataTable from 'primevue/datatable';\r\nimport Column from 'primevue/column';\r\nimport Panel from 'primevue/panel';\r\nimport Menubar from 'primevue/menubar';\r\n\r\nimport Button from 'primevue/button';\r\nimport Dropdown from 'primevue/dropdown';\r\nimport Dialog from 'primevue/dialog';\r\nimport Textarea from 'primevue/textarea';\r\nimport MultiSelect from 'primevue/multiselect';\r\nimport TriStateCheckbox from 'primevue/tristatecheckbox';\r\nimport Calendar from 'primevue/calendar';\r\nimport Card from 'primevue/card';\r\n\r\nconst app = createApp(App);\r\napp.use(PrimeVue);\r\napp.use(ToastService);\r\napp.use(VTooltip);\r\napp.component('p:inputText', InputText);\r\napp.component('p_toast', Toast);\r\napp.component('p:dataTable', DataTable);\r\napp.component('p_column', Column);\r\napp.component('p:commandButton', Button);\r\napp.component('p_panel', Panel);\r\napp.component('p_menubar', Menubar);\r\napp.component('p:selectOneMenu', Dropdown);\r\napp.component('p_dialog', Dialog);\r\napp.component('TextArea', Textarea);\r\napp.component('p:selectCheckBoxMenu', MultiSelect);\r\napp.component('p:triStateCheckbox', TriStateCheckbox);\r\napp.component('p_calendar', Calendar);\r\napp.component('p_card', Card);\r\n\r\n// JSON VIEWER\r\nimport JsonViewer from \"vue3-json-viewer\";\r\nimport \"vue3-json-viewer/dist/index.css\";\r\napp.use(JsonViewer);\r\nimport mitt from 'mitt'\r\nconst emitter = mitt();\r\napp.config.globalProperties.emitter = emitter;\r\n\r\n// VUEX\r\nimport store from \"@/store/user\";\r\n\r\napp.use(store); // usa el store en tu aplicación\r\n\r\n// AXIOS\r\nimport axios from 'axios'\r\nimport VueAxios from 'vue-axios'\r\napp.use(VueAxios, axios)\r\n\r\n\r\n// KEYCLOAK\r\nconst initOptions = {\r\n    url: process.env.VUE_APP_KEYCLOAK_API_URL,\r\n    realm: process.env.VUE_APP_KEYCLOAK_REALM,\r\n    clientId: process.env.VUE_APP_KEYCLOAK_CLIENT_ID,\r\n}\r\n\r\nconst keycloak = Keycloak(initOptions)\r\n\r\nkeycloak.init({ onLoad: 'login-required' }).then(() => {\r\n    let roles = keycloak.realmAccess.roles;\r\n    roles = roles.filter(role => !role.includes(\"offline_access\") && !role.includes(\"uma_authorization\") && !role.includes(\"default-roles-spring-boot-microservices-realm\"));\r\n    store.commit('setUserName', keycloak.tokenParsed.preferred_username)\r\n    store.commit('setKeycloakToken', keycloak.token)\r\n    store.commit('setKeycloakTokenParsed', keycloak.tokenParsed)\r\n    store.commit('setRoles', roles);\r\n\r\n    emitter.on('keycloak-logout', () => {\r\n        keycloak.logout()\r\n    })\r\n\r\n    // Token Refresh\r\n    setInterval(() => {\r\n        keycloak\r\n            .updateToken(70)\r\n            .then((refreshed) => {\r\n                if (refreshed) {\r\n                    let roles = keycloak.realmAccess.roles;\r\n                    roles = roles.filter(role => !role.includes(\"offline_access\") && !role.includes(\"uma_authorization\") && !role.includes(\"default-roles-spring-boot-microservices-realm\"));\r\n                    store.commit('setUserName', keycloak.tokenParsed.preferred_username)\r\n                    store.commit('setKeycloakToken', keycloak.token)\r\n                    store.commit('setKeycloakTokenParsed', keycloak.tokenParsed)\r\n                    store.commit('setRoles', roles)\r\n                    console.info('Token refreshed' + refreshed)\r\n                } else {\r\n                    console.warn('Token not refreshed, valid for ' + Math.round(keycloak.tokenParsed.exp + keycloak.timeSkew - new Date().getTime() / 1000) + ' seconds')\r\n                }\r\n            })\r\n            .catch(() => {\r\n                keycloak.logout()\r\n            })\r\n    }, 60 * 1000)\r\n    app.mount('#app')\r\n})\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}