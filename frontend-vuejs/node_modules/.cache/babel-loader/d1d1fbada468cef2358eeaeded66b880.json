{"ast":null,"code":"import { reactive, nextTick } from 'vue';\nexport function tableBean(service, axiosConfig) {\n  const state = reactive({\n    editedRow: null,\n    selectedRow: null,\n    list: [],\n    isDisabled: false\n  });\n  const setEditedRow = newValue => {\n    state.editedRow = newValue;\n  };\n  const create = () => {\n    state.isDisabled = false;\n    state.editedRow = null;\n  };\n  const list = async () => {\n    console.log('Entrando en list de tableBean');\n    try {\n      const response = await service.getAll(axiosConfig);\n      state.list = response.data;\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  // Llamamos a la función list() al exportar la función tableBean\n  list();\n  const save = async () => {\n    console.log('Dentro del save del composable');\n    console.log(state.editedRow);\n  };\n  const rowSelectListener = async selectedRow => {\n    console.log('Dentro del rowSelectListener del composable');\n    state.selectedRow = selectedRow;\n    state.editedRow = Object.assign({}, selectedRow); // Aquí se clona el objeto\n    await nextTick(); // Espera a que se actualice el valor de state.selectedRow\n\n    console.log('SelectedRow:', state.selectedRow);\n    console.log('EditedRow:', state.editedRow);\n  };\n  const remove = async rowToDelete => {\n    try {\n      await service.remove(rowToDelete.id, axiosConfig);\n      state.list = await list();\n      state.isDisabled = true;\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  return {\n    state,\n    save,\n    remove,\n    create,\n    list,\n    setEditedRow,\n    rowSelectListener\n  };\n}","map":{"version":3,"names":["reactive","nextTick","tableBean","service","axiosConfig","state","editedRow","selectedRow","list","isDisabled","setEditedRow","newValue","create","console","log","response","getAll","data","error","save","rowSelectListener","Object","assign","remove","rowToDelete","id"],"sources":["C:/Users/emalc/OneDrive/Escritorio/CRUD_keycloak_primeVue/keycloak-workshop/frontend-vuejs/src/composables/tableBean.js"],"sourcesContent":["import { reactive, nextTick } from 'vue';\r\n\r\n\r\n\r\nexport function tableBean(service, axiosConfig) {\r\n  const state = reactive({\r\n    editedRow: null,\r\n    selectedRow: null,\r\n    list: [],\r\n    isDisabled: false,\r\n  });\r\n  const setEditedRow = (newValue) => {\r\n    state.editedRow = newValue\r\n  }\r\n\r\n\r\n  const create = () => {\r\n    state.isDisabled = false;\r\n    state.editedRow = null;\r\n  };\r\n\r\n  const list = async () => {\r\n    console.log('Entrando en list de tableBean')\r\n    try {\r\n      const response = await service.getAll(axiosConfig);\r\n      state.list = response.data;\r\n\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  // Llamamos a la función list() al exportar la función tableBean\r\n  list();\r\n\r\n  const save = async () => {\r\n    console.log('Dentro del save del composable')\r\n    console.log(state.editedRow);\r\n\r\n  };\r\n\r\n  const rowSelectListener = async (selectedRow) => {\r\n    console.log('Dentro del rowSelectListener del composable');\r\n    state.selectedRow = selectedRow;\r\n    state.editedRow = Object.assign({}, selectedRow); // Aquí se clona el objeto\r\n    await nextTick(); // Espera a que se actualice el valor de state.selectedRow\r\n  \r\n    console.log('SelectedRow:', state.selectedRow);\r\n    console.log('EditedRow:', state.editedRow);\r\n\r\n  };\r\n  \r\n\r\n\r\n\r\n\r\n  const remove = async (rowToDelete) => {\r\n    try {\r\n      await service.remove(rowToDelete.id, axiosConfig);\r\n      state.list = await list();\r\n      state.isDisabled = true;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return {\r\n    state,\r\n    save,\r\n    remove,\r\n    create,\r\n    list,\r\n    setEditedRow,\r\n    rowSelectListener\r\n\r\n  };\r\n}\r\n"],"mappings":"AAAA,SAASA,QAAQ,EAAEC,QAAQ,QAAQ,KAAK;AAIxC,OAAO,SAASC,SAASA,CAACC,OAAO,EAAEC,WAAW,EAAE;EAC9C,MAAMC,KAAK,GAAGL,QAAQ,CAAC;IACrBM,SAAS,EAAE,IAAI;IACfC,WAAW,EAAE,IAAI;IACjBC,IAAI,EAAE,EAAE;IACRC,UAAU,EAAE;EACd,CAAC,CAAC;EACF,MAAMC,YAAY,GAAIC,QAAQ,IAAK;IACjCN,KAAK,CAACC,SAAS,GAAGK,QAAQ;EAC5B,CAAC;EAGD,MAAMC,MAAM,GAAGA,CAAA,KAAM;IACnBP,KAAK,CAACI,UAAU,GAAG,KAAK;IACxBJ,KAAK,CAACC,SAAS,GAAG,IAAI;EACxB,CAAC;EAED,MAAME,IAAI,GAAG,MAAAA,CAAA,KAAY;IACvBK,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;IAC5C,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMZ,OAAO,CAACa,MAAM,CAACZ,WAAW,CAAC;MAClDC,KAAK,CAACG,IAAI,GAAGO,QAAQ,CAACE,IAAI;IAE5B,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdL,OAAO,CAACC,GAAG,CAACI,KAAK,CAAC;IACpB;EACF,CAAC;;EAED;EACAV,IAAI,EAAE;EAEN,MAAMW,IAAI,GAAG,MAAAA,CAAA,KAAY;IACvBN,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;IAC7CD,OAAO,CAACC,GAAG,CAACT,KAAK,CAACC,SAAS,CAAC;EAE9B,CAAC;EAED,MAAMc,iBAAiB,GAAG,MAAOb,WAAW,IAAK;IAC/CM,OAAO,CAACC,GAAG,CAAC,6CAA6C,CAAC;IAC1DT,KAAK,CAACE,WAAW,GAAGA,WAAW;IAC/BF,KAAK,CAACC,SAAS,GAAGe,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEf,WAAW,CAAC,CAAC,CAAC;IAClD,MAAMN,QAAQ,EAAE,CAAC,CAAC;;IAElBY,OAAO,CAACC,GAAG,CAAC,cAAc,EAAET,KAAK,CAACE,WAAW,CAAC;IAC9CM,OAAO,CAACC,GAAG,CAAC,YAAY,EAAET,KAAK,CAACC,SAAS,CAAC;EAE5C,CAAC;EAMD,MAAMiB,MAAM,GAAG,MAAOC,WAAW,IAAK;IACpC,IAAI;MACF,MAAMrB,OAAO,CAACoB,MAAM,CAACC,WAAW,CAACC,EAAE,EAAErB,WAAW,CAAC;MACjDC,KAAK,CAACG,IAAI,GAAG,MAAMA,IAAI,EAAE;MACzBH,KAAK,CAACI,UAAU,GAAG,IAAI;IACzB,CAAC,CAAC,OAAOS,KAAK,EAAE;MACdL,OAAO,CAACC,GAAG,CAACI,KAAK,CAAC;IACpB;EACF,CAAC;EAED,OAAO;IACLb,KAAK;IACLc,IAAI;IACJI,MAAM;IACNX,MAAM;IACNJ,IAAI;IACJE,YAAY;IACZU;EAEF,CAAC;AACH"},"metadata":{},"sourceType":"module"}